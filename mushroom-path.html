<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mushroom Path - The Crystal of Destiny</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital@0;1&display=swap" rel="stylesheet">
</head>
<body>
    <div class="page-container mushroom-page">
        <header>
            <h1>The Luminous Path</h1>
        </header>
        
        <main>
            <div class="story-container">
                <div class="story-image mushroom-image"></div>
                <div class="story-text">
                    <p>The glowing mushrooms illuminate your path with an ethereal blue light. As you follow their trail deeper into the forest, the trees grow closer together, and the canopy thickens overhead, blocking out the sky.</p>
                    
                    <p>The mushrooms' glow intensifies, casting eerie shadows that seem to move with a life of their own. The whispers of the forest grow louder, almost intelligible now.</p>
                    
                    <p>Suddenly, you emerge into a small clearing dominated by an enormous, ancient tree. Its trunk is wider than a house, and its branches reach up into the darkness beyond sight. The tree's bark glows with the same blue luminescence as the mushrooms.</p>
                    
                    <p>At the base of the tree sits a figureâ€”small, wizened, with skin like bark and hair like moss. The forest guardian looks up at you with eyes that reflect the blue glow all around.</p>
                    
                    <p>"Few find this path," the guardian speaks, voice like rustling leaves. "What do you seek in the heart of the Whispering Woods?"</p>
                    
                    <p class="quest-prompt">How will you respond?</p>
                </div>
            </div>
            
            <div class="choices-container">
                <button class="choice-btn" data-destination="guardian-truth.html">
                    <span class="choice-icon truth-icon"></span>
                    <div class="choice-text">
                        <h3>Tell the Truth</h3>
                        <p>Explain your quest to find the Crystal of Destiny and restore balance to Eldoria.</p>
                    </div>
                </button>
                
                <button class="choice-btn" data-destination="guardian-lie.html">
                    <span class="choice-icon lie-icon"></span>
                    <div class="choice-text">
                        <h3>Conceal Your Purpose</h3>
                        <p>Claim you are merely a traveler who got lost in the woods.</p>
                    </div>
                </button>
                
                <button class="choice-btn" data-destination="guardian-attack.html" data-health-change="-20">
                    <span class="choice-icon attack-icon"></span>
                    <div class="choice-text">
                        <h3>Attack the Guardian</h3>
                        <p>This creature might be guarding the crystal fragment. Take it by force!</p>
                    </div>
                </button>
            </div>
        </main>
        
        <footer>
            <div class="game-status">
                <div id="player-stats">
                    <span id="player-name-display">Adventurer</span> | 
                    <span id="player-class-display">Unknown</span> | 
                    <span id="player-health">Health: 100</span>
                </div>
                <div id="inventory">
                    <span>Inventory:</span>
                    <ul id="inventory-list"></ul>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Initialize game state
        let gameState = {
            playerName: "Adventurer",
            playerClass: "Unknown",
            health: 100,
            inventory: [],
            visitedLocations: []
        };

        // DOM Elements
        const choiceButtons = document.querySelectorAll('.choice-btn');
        const playerNameDisplay = document.getElementById('player-name-display');
        const playerClassDisplay = document.getElementById('player-class-display');
        const playerHealthDisplay = document.getElementById('player-health');

        // Load game state from localStorage
        function loadGameState() {
            const savedState = localStorage.getItem('questGameState');
            if (savedState) {
                gameState = JSON.parse(savedState);
                
                // Update UI with saved state
                playerNameDisplay.textContent = gameState.playerName;
                playerClassDisplay.textContent = gameState.playerClass;
                playerHealthDisplay.textContent = `Health: ${gameState.health}`;
                
                // Add this location to visited locations if not already there
                if (!gameState.visitedLocations.includes('mushroom-path')) {
                    gameState.visitedLocations.push('mushroom-path');
                    saveGameState();
                }
                
                // Populate inventory
                updateInventoryDisplay();
            } else {
                // If no saved state, redirect to start page
                window.location.href = "index.html";
            }
        }

        // Save game state to localStorage
        function saveGameState() {
            localStorage.setItem('questGameState', JSON.stringify(gameState));
        }

        // Update inventory display
        function updateInventoryDisplay() {
            const inventoryList = document.getElementById('inventory-list');
            inventoryList.innerHTML = '';
            
            if (gameState.inventory.length === 0) {
                const emptyItem = document.createElement('li');
                emptyItem.textContent = 'Empty';
                inventoryList.appendChild(emptyItem);
            } else {
                gameState.inventory.forEach(item => {
                    const listItem = document.createElement('li');
                    listItem.textContent = item;
                    inventoryList.appendChild(listItem);
                });
            }
        }

        // Add event listeners to choice buttons
        choiceButtons.forEach(button => {
            button.addEventListener('click', function() {
                const destination = this.getAttribute('data-destination');
                const healthChange = parseInt(this.getAttribute('data-health-change') || 0);
                
                // Apply health change if specified
                if (healthChange) {
                    gameState.health = Math.max(0, gameState.health + healthChange);
                    
                    // Show health change notification
                    const notification = document.createElement('div');
                    notification.className = 'health-notification ' + (healthChange < 0 ? 'damage' : 'heal');
                    notification.innerHTML = `<span>Health ${healthChange < 0 ? '' : '+'}${healthChange}</span>`;
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        notification.classList.add('show');
                    }, 100);
                    
                    setTimeout(() => {
                        notification.classList.remove('show');
                        setTimeout(() => {
                            document.body.removeChild(notification);
                        }, 500);
                    }, 3000);
                    
                    saveGameState();
                }
                
                // Navigate to destination
                window.location.href = destination;
            });
        });

        // Load game state when page loads
        loadGameState();
    </script>
</body>
</html>
